<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>é¢è«‡ãƒ¡ãƒ¢ç”Ÿæˆãƒ„ãƒ¼ãƒ«</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    * { box-sizing: border-box; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans JP", sans-serif;
      background: #f5f7fb;
      padding: 20px;
    }

    .box {
      max-width: 520px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 14px;
      box-shadow: 0 8px 20px rgba(0,0,0,.08);
    }

    h1 {
      font-size: 18px;
      margin: 0 0 16px;
    }

    label {
      display: block;
      margin-top: 12px;
      font-size: 13px;
      color: #555;
    }

    input, select, button, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      font-size: 15px;
      border-radius: 10px;
      border: 1px solid #d7dbe6;
      background: #fff;
    }

    /* âœ… date ã®ã€Œã‚¢ã‚¤ã‚³ãƒ³ãŒã¯ã¿å‡ºã‚‹ã€å¯¾ç­– + ã€Œæ å†…ã©ã“æŠ¼ã—ã¦ã‚‚ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã€åŒ– */
    .dateWrap { position: relative; }
    input[type="date"] {
      padding-right: 12px;
    }
    /* WebKitç³»ï¼ˆChrome/Edge/Safariï¼‰: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã‚’å…¥åŠ›æ¬„å…¨ä½“ã«åºƒã’ã‚‹ */
    input[type="date"]::-webkit-calendar-picker-indicator {
      opacity: 0;              /* è¦‹ãˆãªãã™ã‚‹ï¼ˆã‚¿ãƒƒãƒ—ã¯ç”Ÿãã‚‹ï¼‰ */
      position: absolute;
      right: 0;
      top: 0;
      width: 100%;
      height: 100%;
      cursor: pointer;
    }

    .btnRow {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 14px;
    }

    button {
      border: none;
      cursor: pointer;
      font-weight: 800;
      background: #2563eb;
      color: #fff;
    }

    button.secondary {
      background: #111827;
    }

    button:hover { opacity: .92; }

    .mini {
      margin-top: 10px;
      font-size: 12px;
      color: #667085;
    }

    textarea {
      height: 260px;
      margin-top: 12px;
      font-size: 14px;
      line-height: 1.6;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Noto Sans Mono", monospace;
      white-space: pre-wrap;
    }

    .status {
      margin-top: 8px;
      font-size: 12px;
      color: #0f766e;
      min-height: 16px;
    }
  </style>
</head>

<body>
  <div class="box">
    <h1>ğŸ—“ é¢è«‡ãƒ¡ãƒ¢ç”Ÿæˆãƒ„ãƒ¼ãƒ«</h1>

    <label>æ—¥ä»˜ï¼ˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼‰</label>
    <div class="dateWrap">
      <input type="date" id="date">
    </div>

    <label>é–‹å§‹æ™‚é–“ï¼ˆ10ã€œ17æ™‚ï¼‰</label>
    <select id="time"></select>

    <label>é¢è«‡æ–¹æ³•</label>
    <select id="method">
      <option>Google Meet</option>
      <option>é›»è©±</option>
      <option>LINE</option>
      <option>ãƒ¡ãƒ¼ãƒ«</option>
    </select>

    <div class="btnRow">
      <button id="copyAllBtn">å…¨æ–‡ã‚³ãƒ”ãƒ¼ï¼ˆé€ä¿¡ç”¨ï¼‰</button>
      <button class="secondary" id="copyDateBtn">æ—¥æ™‚ã ã‘ã‚³ãƒ”ãƒ¼</button>
    </div>

    <div class="status" id="status"></div>

    <div class="mini">ä¸‹ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯è‡ªå‹•æ›´æ–°ã•ã‚Œã¾ã™ï¼ˆãã®ã¾ã¾è²¼ã‚Šä»˜ã‘OKï¼‰</div>
    <textarea id="preview" readonly></textarea>
  </div>

<script>
(() => {
  const week = ["æ—¥","æœˆ","ç«","æ°´","æœ¨","é‡‘","åœŸ"];

  // ç½«ç·šã¯ã€Œæ–‡å­—æ•°å›ºå®šã€ï¼ç«¯æœ«ä¾å­˜ã—ã«ãã„
  const LINE = "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€";

  const dateEl = document.getElementById("date");
  const timeEl = document.getElementById("time");
  const methodEl = document.getElementById("method");
  const previewEl = document.getElementById("preview");
  const statusEl = document.getElementById("status");
  const copyAllBtn = document.getElementById("copyAllBtn");
  const copyDateBtn = document.getElementById("copyDateBtn");

  // æ™‚é–“ç”Ÿæˆï¼ˆ10ã€œ17ï¼‰
  function buildTimes() {
    timeEl.innerHTML = "";
    for (let h = 10; h <= 17; h++) {
      const opt = document.createElement("option");
      opt.value = String(h);
      opt.textContent = `${h}æ™‚ï½é¢è«‡é–‹å§‹`;
      timeEl.appendChild(opt);
    }
  }

  // ä»Šæ—¥ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚»ãƒƒãƒˆï¼ˆä»»æ„ã§ä¾¿åˆ©ï¼‰
  function setToday() {
    const t = new Date();
    const yyyy = t.getFullYear();
    const mm = String(t.getMonth()+1).padStart(2,"0");
    const dd = String(t.getDate()).padStart(2,"0");
    dateEl.value = `${yyyy}-${mm}-${dd}`;
  }

  function fmtDateParts() {
    const v = dateEl.value;
    if (!v) return null;
    const d = new Date(v + "T00:00:00");
    const y = d.getFullYear();
    const m = d.getMonth() + 1;
    const day = d.getDate();
    const dow = week[d.getDay()];
    const h = Number(timeEl.value || 10);
    const method = methodEl.value;

    return { y, m, day, dow, h, method };
  }

  // âœ… ã€Œæ—¥æ™‚BOXã€ï¼ˆã“ã‚Œã‚’â€œæ—¥æ™‚ã®ã¿ã‚³ãƒ”ãƒ¼â€ã§ä½¿ã†ï¼‰
  function buildDateBox() {
    const p = fmtDateParts();
    if (!p) return "";

    return `${LINE}
é¢è«‡äºˆç´„æ—¥æ™‚
${p.y}å¹´${p.m}æœˆ${p.day}æ—¥ï¼ˆ${p.dow}ï¼‰
${p.h}æ™‚ï½é¢è«‡é–‹å§‹
æ–¹æ³•ï¼š${p.method}
${LINE}`;
  }

  // âœ… ã€Œå…¨æ–‡ãƒ†ãƒ³ãƒ—ãƒ¬ã€ï¼ˆå¿…ãšå‡ºã‚‹å›ºå®šæ–‡ + æ—¥æ™‚BOXæŒ¿å…¥ï¼‰
  function buildFullMessage() {
    const p = fmtDateParts();
    if (!p) return "";

    const dateBox = buildDateBox();

    return `ãƒ•ãƒ¤ã‚»ãƒ«ã‚µãƒãƒ¼ãƒˆã§ã™ã€‚
ã”é€£çµ¡ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚

${dateBox}

ã”æŒ‡å®šã®ãŠæ™‚é–“ã«
ç©ºãæ ãŒã”ã–ã„ã¾ã—ãŸã®ã§
ä¸Šè¨˜æ—¥ç¨‹ã«ã¦é¢è«‡ã«
å…¥ã‚‰ã›ã¦ã„ãŸã ãã¾ã™ã€‚

é¢è«‡ã®éš›ã«ã¯

ã€Œãƒ•ãƒ¤ã‚»ãƒ«AIã®æº–å‚™ã€
ã€ŒèããŸã„ã“ã¨ã€
ã€Œã‚µãƒãƒ¼ãƒˆã‚’å—ã‘ãŸã„ã“ã¨ã€

ã“ã¡ã‚‰ã‚’ã”ç”¨æ„ãƒ»ã”æº–å‚™ã®ã†ãˆ
ã”å‚åŠ ã„ãŸã ã‘ã¾ã™ã¨å¹¸ã„ã§ã™ã€‚

ãã®é–“ã§ã‚‚
ã”è³ªå•ãªã©ãŒã”ã–ã„ã¾ã—ãŸã‚‰

ã—ã£ã‹ã‚Šä¸å¯§ã«ã‚µãƒãƒ¼ãƒˆå¯¾å¿œã‚’
ã•ã›ã¦ã„ãŸã ãã¾ã™ã®ã§

ã”ä¸æ˜ç‚¹ãŒã”ã–ã„ã¾ã™å ´åˆã¯
ãŠå•ã„åˆã‚ã›ãã ã•ã„ã¾ã›ã€‚

ä½•å’ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚`;
  }

  function renderPreview() {
    const text = buildFullMessage();
    previewEl.value = text || "æ—¥ä»˜ã‚’é¸ã¶ã¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒå‡ºã¾ã™";
    statusEl.textContent = "";
  }

  async function copyText(text, okMsg) {
    if (!text) {
      statusEl.textContent = "æ—¥ä»˜ã‚’é¸ã‚“ã§ãã ã•ã„";
      statusEl.style.color = "#b45309";
      return;
    }
    try {
      await navigator.clipboard.writeText(text);
      statusEl.textContent = okMsg;
      statusEl.style.color = "#0f766e";
    } catch {
      // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
      previewEl.focus();
      previewEl.select();
      document.execCommand("copy");
      statusEl.textContent = okMsg + "ï¼ˆäº’æ›ã‚³ãƒ”ãƒ¼ï¼‰";
      statusEl.style.color = "#0f766e";
    }
    setTimeout(() => statusEl.textContent = "", 1500);
  }

  // Events
  dateEl.addEventListener("change", renderPreview);
  timeEl.addEventListener("change", renderPreview);
  methodEl.addEventListener("change", renderPreview);

  copyAllBtn.addEventListener("click", () => copyText(buildFullMessage(), "å…¨æ–‡ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ"));
  copyDateBtn.addEventListener("click", () => copyText(buildDateBox(), "æ—¥æ™‚ã ã‘ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ"));

  // init
  buildTimes();
  setToday();
  renderPreview();
})();
</script>
</body>
</html>
